from langchain_huggingface import HuggingFaceEmbeddings
import weaviate

client = weaviate.connect_to_local()
collection = client.collections.get("Chunks")
embeddings = HuggingFaceEmbeddings(model_name="all-MiniLM-L6-v2")

query = "spiega il funzionamento del transistor bipolare"
query_vector = embeddings.embed_query(query)

# Query semantica (top 3 chunk pi√π simili)
results = collection.query.near_vector(
    near_vector=query_vector,
    limit=3,
    return_properties=["text", "source", "page", "images"]
)
for obj in results.objects:
    print(obj.properties)
client.close()
